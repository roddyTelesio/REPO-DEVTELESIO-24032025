<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>CLM_create_document_version_details</name>
        <label>[CLM] create document version details</label>
        <locationX>1588</locationX>
        <locationY>3278</locationY>
        <actionName>CLM_CreateDocumentVersionDetails</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Is_create_success</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>agreementId</name>
            <value>
                <elementReference>newCCAgreement.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>comment</name>
            <value>
                <stringValue>Ceding Company Agreement</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>templateId</name>
            <value>
                <elementReference>Get_final_DocVersion_Detail.TECH_TemplateId__c</elementReference>
            </value>
        </inputParameters>
        <nameSegment>CLM_CreateDocumentVersionDetails</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Clone_content_version</name>
        <label>Clone content version</label>
        <locationX>1170</locationX>
        <locationY>3494</locationY>
        <actionName>CLM_CloneContentVersion</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Is_clone_success</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>contentVersionId</name>
            <value>
                <elementReference>Get_final_DocVersion_Detail.Apttus__ContentVersionId__c</elementReference>
            </value>
        </inputParameters>
        <nameSegment>CLM_CloneContentVersion</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <actionCalls>
        <name>Comply_imported_documents_on_documentVersionDetails</name>
        <label>Comply imported documents on documentVersionDetails</label>
        <locationX>598</locationX>
        <locationY>4418</locationY>
        <actionName>CLM_ComplyImportedDocs</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Is_comply_success</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>agreementId</name>
            <value>
                <elementReference>newCCAgreement.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>CLM_ComplyImportedDocs</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </actionCalls>
    <apiVersion>59.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Add_ContentDocIds</name>
        <label>Add ContentDocIds</label>
        <locationX>138</locationX>
        <locationY>2522</locationY>
        <assignmentItems>
            <assignToReference>ParentContentDocumentIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>eachCDL.ContentDocumentId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>eachCDL</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_list</name>
        <label>Add to list</label>
        <locationX>1370</locationX>
        <locationY>1490</locationY>
        <assignmentItems>
            <assignToReference>availableCCCIdsForCreate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>eachCCLineItem.Covered_Ceding_Company__r.Account__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>eachCCLineItem</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Set_Error_Msg</name>
        <label>Set ErrMsg</label>
        <locationX>2338</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>ErrMsg</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>No final (checked-in) document version detail generated on this agreement yet to be able to move forward</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ROllback</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Init_agreement</name>
        <label>Init agreement</label>
        <locationX>1588</locationX>
        <locationY>3062</locationY>
        <assignmentItems>
            <assignToReference>newCCAgreement.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>parentAgreement.RecordTypeId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newCCAgreement.Program__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>parentAgreement.Program__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newCCAgreement.Apttus__Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>parentAgreement.Apttus__Account__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newCCAgreement.Apttus__Parent_Agreement__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>parentAgreement.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newCCAgreement.CoveredCedingCompany__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>eachCCSelection.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newCCAgreement.IsCedingAgreement__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newCCAgreement.Apttus__Status_Category__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>In Signatures</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newCCAgreement.Business_Line__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>parentAgreement.Business_Line__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_agreement</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Init_CDLs_for_creation</name>
        <label>Init CDLs for creation</label>
        <locationX>578</locationX>
        <locationY>4142</locationY>
        <assignmentItems>
            <assignToReference>CDL.LinkedEntityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>newCCAgreement.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CDL.ContentDocumentId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>each_ParentContentVersion.ContentDocumentId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CDLsToCreate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>CDL</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>each_ParentContentVersion</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>List_CCs</name>
        <label>Add List CC Ids</label>
        <locationX>1438</locationX>
        <locationY>782</locationY>
        <assignmentItems>
            <assignToReference>existingCCIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>eachExistingCCAgreement.CoveredCedingCompany__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>eachExistingCCAgreement</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_ErrMsgSelection</name>
        <label>Set ErrMsgSelection</label>
        <locationX>1018</locationX>
        <locationY>2198</locationY>
        <assignmentItems>
            <assignToReference>errMsgSelection</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>ðŸ˜  Please make at least 1 selection before moving on the next screen</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Selection_screen</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Error_Msg</name>
        <label>Set Error Msg</label>
        <locationX>1810</locationX>
        <locationY>1274</locationY>
        <assignmentItems>
            <assignToReference>ErrMsg</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>No Covered Ceding Company found for this agreement</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ROllback</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Error_Msg2</name>
        <label>Set Error Msg</label>
        <locationX>1546</locationX>
        <locationY>1874</locationY>
        <assignmentItems>
            <assignToReference>ErrMsg</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CCAgreementsAlreadyCreated</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ROllback</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Already_Created</name>
        <label>Already Created ?</label>
        <locationX>1282</locationX>
        <locationY>1382</locationY>
        <defaultConnector>
            <targetReference>Add_to_list</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YESAlready_Created</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>existingCCIds</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>eachCCLineItem.Covered_Ceding_Company__r.Account__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>eachCCLineItem</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <decisions>
        <name>Any_CCC_eligible_for_create_not_already_created</name>
        <label>Any CCC eligible for create (not already created) ?</label>
        <locationX>1106</locationX>
        <locationY>1766</locationY>
        <defaultConnector>
            <targetReference>Set_Error_Msg2</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YES_Any_CCC_eligible_for_create_not_already_created</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>availableCCCIdsForCreate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_CoveredCedingCompanies</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <decisions>
        <name>Any_CDL_to_create</name>
        <label>Any CDL to create ?</label>
        <locationX>314</locationX>
        <locationY>5036</locationY>
        <defaultConnector>
            <targetReference>Success_Redirection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YESAny_CDL_to_create</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CDLsToCreate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_CDLs</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <decisions>
        <name>Any_CedingCompany_selected</name>
        <label>Any CedingCompany selected ?</label>
        <locationX>666</locationX>
        <locationY>2090</locationY>
        <defaultConnector>
            <targetReference>Set_ErrMsgSelection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YESAny_CedingCompany_selected</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sfpegCoveredCompanySelection.selectionList</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_CDL_on_ParentAgreement</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_CC_Agreements</name>
        <label>Found CC Agreements ?</label>
        <locationX>1458</locationX>
        <locationY>566</locationY>
        <defaultConnector>
            <targetReference>ccLineItems</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YES_Found_CC_Agreements</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>existingCCAgreements</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>eachExistingCCAgreement</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_CC_line_items</name>
        <label>Found CC line items ?</label>
        <locationX>1458</locationX>
        <locationY>1166</locationY>
        <defaultConnector>
            <targetReference>Set_Error_Msg</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YESFound_CC_line_items</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ccLineItems</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>eachCCLineItem</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_CDLs</name>
        <label>Found CDLs ?</label>
        <locationX>314</locationX>
        <locationY>2306</locationY>
        <defaultConnector>
            <targetReference>eachCCSelection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YES_Found_CDLs</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_CDL_on_ParentAgreement</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>eachCDL</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_document_version_detail</name>
        <label>Found document version detail ?</label>
        <locationX>1898</locationX>
        <locationY>458</locationY>
        <defaultConnector>
            <targetReference>Copy_1_of_Set_Error_Msg</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YESFound_document_version_detail</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_final_DocVersion_Detail</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Found_CC_Agreements</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_clone_success</name>
        <label>Is clone success ?</label>
        <locationX>1170</locationX>
        <locationY>3602</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YES_Is_clone_success</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Clone_content_version.isSuccess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_ContentDocumentLink_with_DocVersionDetail</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_comply_success</name>
        <label>Is comply success ?</label>
        <locationX>598</locationX>
        <locationY>4526</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YES_Is_comply_success</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Comply_imported_documents_on_documentVersionDetails.isSuccess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>eachCCSelection</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_create_success</name>
        <label>Is create success ?</label>
        <locationX>1588</locationX>
        <locationY>3386</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YESIs_create_success</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>CLM_create_document_version_details.isSuccess</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Clone_content_version</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <decisions>
        <name>Parent_have_any_contentversions</name>
        <label>Parent have any contentversions ?</label>
        <locationX>598</locationX>
        <locationY>3926</locationY>
        <defaultConnector>
            <targetReference>Comply_imported_documents_on_documentVersionDetails</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NO</defaultConnectorLabel>
        <rules>
            <name>YESParent_have_any_contentversions</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Parent_Contentversions</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>each_ParentContentVersion</targetReference>
            </connector>
            <label>YES</label>
        </rules>
    </decisions>
    <description>1. From a parent agreement (acceptation)
2. Generationa cceptation agreements for the PCC&apos;s Ceding companies</description>
    <environments>Default</environments>
    <interviewLabel>CLM - Copy Agreements for Ceding Companies {!$Flow.CurrentDateTime}</interviewLabel>
    <label>CLM - Copy Agreements for Ceding Companies</label>
    <loops>
        <name>each_ParentContentVersion</name>
        <label>each Parent ContentVersion</label>
        <locationX>490</locationX>
        <locationY>4034</locationY>
        <collectionReference>Get_Parent_Contentversions</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Init_CDLs_for_creation</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Comply_imported_documents_on_documentVersionDetails</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>eachCCLineItem</name>
        <label>Each CC Line Item</label>
        <locationX>1106</locationX>
        <locationY>1274</locationY>
        <collectionReference>ccLineItems</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Already_Created</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Any_CCC_eligible_for_create_not_already_created</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>eachCCSelection</name>
        <label>Each Selection</label>
        <locationX>314</locationX>
        <locationY>2954</locationY>
        <collectionReference>sfpegCoveredCompanySelection.selectionList</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Init_agreement</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Any_CDL_to_create</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>eachCDL</name>
        <label>Loop in contentDocLinks</label>
        <locationX>50</locationX>
        <locationY>2414</locationY>
        <collectionReference>Get_CDL_on_ParentAgreement</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Add_ContentDocIds</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_Parent_Contentversions</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>eachExistingCCAgreement</name>
        <label>Each Existing CC Agreement</label>
        <locationX>1350</locationX>
        <locationY>674</locationY>
        <collectionReference>existingCCAgreements</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>List_CCs</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>ccLineItems</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_agreement</name>
        <label>Create agreement</label>
        <locationX>1588</locationX>
        <locationY>3170</locationY>
        <connector>
            <targetReference>CLM_create_document_version_details</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <inputReference>newCCAgreement</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_CDLs</name>
        <label>Create CDLs</label>
        <locationX>50</locationX>
        <locationY>5144</locationY>
        <connector>
            <targetReference>Success_Redirection</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <inputReference>CDLsToCreate</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_ContentDocumentLink_with_DocVersionDetail</name>
        <label>Create ContentDocumentLink with DocVersionDetail</label>
        <locationX>598</locationX>
        <locationY>3710</locationY>
        <connector>
            <targetReference>Update_DocVersionDetails_values</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>ContentDocumentId</field>
            <value>
                <elementReference>Clone_content_version.clonedContentDocId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LinkedEntityId</field>
            <value>
                <elementReference>CLM_create_document_version_details.contentDocumentVersionDetail.Id</elementReference>
            </value>
        </inputAssignments>
        <object>ContentDocumentLink</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>ccLineItems</name>
        <label>Get CC Line items</label>
        <locationX>1458</locationX>
        <locationY>1058</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_CC_line_items</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Covered_Ceding_Company__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Apttus__AgreementId__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>parentAgreement.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Apttus__AgreementLineItem__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>existingCCAgreements</name>
        <label>Get existing CC agreements</label>
        <locationX>1898</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_final_DocVersion_Detail</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>IsCedingAgreement__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Apttus__Parent_Agreement__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>parentAgreement.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Apttus__APTS_Agreement__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_CDL_on_ParentAgreement</name>
        <label>Get CDL on ParentAgreement</label>
        <locationX>314</locationX>
        <locationY>2198</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_CDLs</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>LinkedEntityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>parentAgreement.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ContentDocumentLink</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_CoveredCedingCompanies</name>
        <label>Get CoveredCedingCompanies</label>
        <locationX>666</locationX>
        <locationY>1874</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Selection_screen</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>In</operator>
            <value>
                <elementReference>availableCCCIdsForCreate</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Account</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_final_DocVersion_Detail</name>
        <label>Get final DocVersion Detail</label>
        <locationX>1898</locationX>
        <locationY>350</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_document_version_detail</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>TECH_AgreementId__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>parentAgreement.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Apttus__DocumentInfo__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Final</stringValue>
            </value>
        </filters>
        <filters>
            <field>FileExtension__c</field>
            <operator>Contains</operator>
            <value>
                <stringValue>doc</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Apttus__DocumentVersionDetail__c</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Parent_Contentversions</name>
        <label>Get Parent Contentversions</label>
        <locationX>50</locationX>
        <locationY>2714</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>eachCCSelection</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ContentDocumentId</field>
            <operator>In</operator>
            <value>
                <elementReference>ParentContentDocumentIds</elementReference>
            </value>
        </filters>
        <filters>
            <field>isUniversignDocWithSignaturePage__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>SentForSignature_Universign__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>UniversignSignedDoc__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>FileType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>PDF</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ContentVersion</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>ContentDocumentId</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>parentAgreement</name>
        <label>Get Parent Agreement</label>
        <locationX>1898</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>existingCCAgreements</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Apttus__APTS_Agreement__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordRollbacks>
        <name>ROllback</name>
        <label>ROllback</label>
        <locationX>1898</locationX>
        <locationY>5936</locationY>
        <connector>
            <targetReference>ErrorScreen</targetReference>
        </connector>
    </recordRollbacks>
    <recordUpdates>
        <name>Update_DocVersionDetails_values</name>
        <label>Update DocVersionDetails values</label>
        <locationX>598</locationX>
        <locationY>3818</locationY>
        <connector>
            <targetReference>Parent_have_any_contentversions</targetReference>
        </connector>
        <faultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>ROllback</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CLM_create_document_version_details.contentDocumentVersionDetail.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Apttus__ContentId__c</field>
            <value>
                <elementReference>Clone_content_version.clonedContentDocId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Apttus__ContentVersionId__c</field>
            <value>
                <elementReference>Clone_content_version.clonedContentVersionId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Apttus__FileType__c</field>
            <value>
                <stringValue>ContentDocument</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Apttus__IsTransient__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <object>Apttus__DocumentVersionDetail__c</object>
    </recordUpdates>
    <screens>
        <name>ErrorScreen</name>
        <label>ErrorScreen</label>
        <locationX>1898</locationX>
        <locationY>6044</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>ErrorMsgDisplay</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;strong style=&quot;font-size: 16px;&quot;&gt;Error Screen ðŸ’¥ðŸ˜­&lt;/strong&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;{!ErrMsg}&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;{!CLM_create_document_version_details.errorMsg}&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;{!$Flow.FaultMessage}&lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;{!Clone_content_version.errorMsg}&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>false</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Selection_screen</name>
        <label>Selection screen</label>
        <locationX>666</locationX>
        <locationY>1982</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Any_CedingCompany_selected</targetReference>
        </connector>
        <fields>
            <name>Screen1_SelectionHelp</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;Please &lt;/span&gt;&lt;strong style=&quot;font-size: 14px; color: rgb(22, 110, 189);&quot;&gt;select&lt;/strong&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt; the&lt;/span&gt;&lt;strong style=&quot;font-size: 14px;&quot;&gt; &lt;/strong&gt;&lt;strong style=&quot;font-size: 14px; color: rgb(22, 110, 189);&quot;&gt;covered ceding company(s)&lt;/strong&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt; for which you want to copy the agreement &lt;/span&gt;&lt;strong style=&quot;font-size: 14px; color: rgb(22, 110, 189);&quot;&gt;{!parentAgreement.FullName__c} &lt;/strong&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;for&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>sfpegCoveredCompanySelection</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>Account</typeValue>
            </dataTypeMappings>
            <extensionName>c:sfpegListMultiSelectorFlw</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>recordList</name>
                <value>
                    <elementReference>Get_CoveredCedingCompanies</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>cardIcon</name>
                <value>
                    <stringValue>standard:account</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>cardTitle</name>
                <value>
                    <stringValue>Covered Company Selection</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>defaultSortedBy</name>
                <value>
                    <stringValue>name</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>fieldSetName</name>
                <value>
                    <stringValue>Account.CLM_Reinsurers_List_Selection</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>displayMode</name>
                <value>
                    <stringValue>tiles</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>hideSelectAllBtn</name>
                <value>
                    <booleanValue>false</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>preselectionList</name>
                <value>
                    <elementReference>sfpegCoveredCompanySelection.selectionList</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>searchHeight</name>
                <value>
                    <numberValue>300.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>isSearchAuto</name>
                <value>
                    <booleanValue>false</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>isDebug</name>
                <value>
                    <booleanValue>false</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>showSearch</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>showSelection</name>
                <value>
                    <booleanValue>false</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>showSort</name>
                <value>
                    <booleanValue>false</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>isSingleSelect</name>
                <value>
                    <booleanValue>false</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tileSize</name>
                <value>
                    <numberValue>4.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectName</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>nameField</name>
                <value>
                    <stringValue>Name</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>nameLabel</name>
                <value>
                    <stringValue>Name</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <fields>
            <name>ErrSlectionDisplay</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;color: rgb(255, 0, 0); font-size: 14px;&quot;&gt;{!errMsgSelection}&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Success_Redirection</name>
        <label>Success &amp; Redirection</label>
        <locationX>314</locationX>
        <locationY>5384</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>SuccessMsg</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 16px; color: rgb(68, 68, 68);&quot;&gt;Covered ceding Agreement(s) created &lt;/span&gt;&lt;strong style=&quot;background-color: rgb(255, 255, 255); font-size: 16px; color: rgb(22, 110, 189);&quot;&gt;successfully&lt;/strong&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 16px; color: rgb(68, 68, 68);&quot;&gt; ðŸ˜Ž&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>1772</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>parentAgreement</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>CCAgreementsAlreadyCreated</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;All ceding company agreements &lt;/span&gt;&lt;strong style=&quot;font-size: 14px; color: rgb(22, 110, 189);&quot;&gt;have already been created&lt;/strong&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt; for this agreement &lt;/span&gt;&lt;span style=&quot;font-size: 18px; color: rgb(68, 68, 68); background-color: rgb(255, 255, 255);&quot;&gt;ðŸ‘€&lt;/span&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;. &lt;/span&gt;&lt;/p&gt;&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;You will find them on the parent agreement in the section &quot;&lt;/span&gt;&lt;strong style=&quot;font-size: 14px; color: rgb(22, 110, 189);&quot;&gt;Ceding Agreements&lt;/strong&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt;&quot; &lt;/span&gt;&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>AvailableCCC</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>availableCCCIdsForCreate</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CDL</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContentDocumentLink</objectType>
    </variables>
    <variables>
        <description>ContentDocumentLinks to associate parent agreement&apos;s attachment to child agreement</description>
        <name>CDLsToCreate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContentDocumentLink</objectType>
    </variables>
    <variables>
        <name>ErrMsg</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>errMsgSelection</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Covered Ceding Company Ids of Existing Covered Ceding Agreements</description>
        <name>existingCCIds</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>ExistingCCIds</stringValue>
        </value>
    </variables>
    <variables>
        <name>newCCAgreement</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Apttus__APTS_Agreement__c</objectType>
    </variables>
    <variables>
        <name>ParentContentDocumentIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
